Utils = require 'utils/index.coffee'

module.exports = ( interfaceDef )->
	cmdName = Utils.getCmdName( interfaceDef.interfaceUrl )

	if ( interfaceDef.method == 'POST' ) or ( interfaceDef.method == 'post' )
		return  """\n
			/**
			* #{interfaceDef.interfaceName}
			* @autor #{interfaceDef.author}
			* @desc #{interfaceDef.desc}
			*/
			public Map #{Utils.getMethodName interfaceDef.interfaceUrl}( Map beanMap ){
				Object rlt = getTransactionTemplate().execute( new TransactionCallback() {
					protected Object doInTransaction( TransactionStatus arg0 ) {
						return get#{Utils.transferFirstLetterUpper cmdName}Domain().#{Utils.getMethodName interfaceDef.interfaceUrl}( beanMap );
					}
				});
				return ( Map )rlt;
			}
			\n
		"""
	else
		return  """\n
			/**
			* #{interfaceDef.interfaceName}
			* @autor #{interfaceDef.author}
			* @desc #{interfaceDef.desc}
			*/
			public Map #{Utils.getMethodName interfaceDef.interfaceUrl}( Map beanMap ){
				return get#{Utils.transferFirstLetterUpper cmdName}Domain().#{Utils.getMethodName interfaceDef.interfaceUrl}( beanMap );
			}
			\n
		"""	